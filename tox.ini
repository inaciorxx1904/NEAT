[tox]
envlist = py38, clean, report

[gh-actions]
python =
    3.8: py38, clean, report

[coverage:paths]
sources = 
    .tox/py38/lib/python3.8/site-packages/

[testenv]
passenv = 
    GITHUB_*
setenv=
    py38: COVERAGE_FILE=.coverage.{envname}
depends =
    py38: clean
    report: py38

[testenv:report]
deps = coverage
skip_install = true
commands =
    ; coverage combine --keep
    coverage report
    coverage xml

[testenv:clean]
deps = coverage
skip_install = true
commands = coverage erase

[testenv:py38]
skip_install = true
commands = 
    coverage run --source=neat --rcfile=tox.ini -m pytest tests
wheel = 
    clean: false
    report: false
    py38: false
wheel_pep517 = true
deps =
    numpy
    wheel
    scipy
    coverage
    cmake
    ninja